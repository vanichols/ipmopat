---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# ipmopat

<!-- badges: start -->
<!-- badges: end -->

The goal of **ipmopat** is to provide open-source processing of data elicited from projects in the ADOPT-IPM consortium. It is an Integrated Pest Management (IPM) Open-source Performance Assessment Tool (OPAT), thus the clunky name, IPMOPAT. 

## Quick overview of data flow
1. An ADOPT-IPM project leader or collaborator will choose a Common Commercial Practice (CCP) and a new IPM-based method to compare. 
2. The expert will assign weights to each of the six value categories, according to their priorities:
  - Crop value
  - Health and safety
  - Direct costs
  - Environment
  - Time and management
  - Coordination requirements
3. Starting with the CCP scenario, the expert will rate each value category:
  - Very low value
  - Low value
  - Medium value
  - High value
  - Very high value
4. The expert will also assign a confidence level to their ratings:
  - Low
  - Medium
  - High
  - Very High
5. The expert will repeat steps 3 and 4 for the IPM scenario
6. This **impopat** R package will 
  - take those ratings/confidence level pairs, and create value distributions for each of the six categories
  - combine the six categories into a summary value distribution, based on the user 
  - create visualizations that compare the value of the two scenarios


## Installation

You can install the development version of ipmopat from [GitHub](https://github.com/) with:

``` r
# install.packages("pak")
pak::pak("vanichols/ipmopat")
```

## Example

Look at example data template for comparing glyphosate and fairy dust in lettuce for weed control

```{r example1, warning=F, message=F, include=F}

library(dplyr)
```

```{r example1a, warning=F, message=F}
library(ipmopat)

ipm_exampdat %>% 
  dplyr::select(short, weight, ccp_rating, ccp_confidence, ipm_rating, ipm_confidence)
```

See more details about the categories, it will have some more detail added as we refine the questionaire...

```{r example1b}
ipm_shortinfo
```
Create distributions of 'value' for each pest management scenario within each of the six metrics:
```{r example2, message=F, warning=F, include = T}
head(Ratings2Distributions())
```

Use the results from Ratings2Distributions, and combine the six metrics into one summary
```{r example3, include = T}
head(CombineSixMetrics())
```


Finally, you can visualize the results in either a dot plot or a bar graph
```{r example4, warning=F, include = T, fig.height=12, fig.width=8}
VisualizeResultsBarFig()
```


